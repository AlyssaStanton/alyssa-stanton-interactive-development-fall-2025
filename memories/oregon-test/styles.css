/* styles.css - minimal, calm Oregon vibe */
:root{
  --sky1: #7aa7d9;
  --sky2: #426a8f;
  --mist: rgba(250,250,250,0.25);
  --mount: #2c3e50;
  --mount2: #34556a;
  --tree: #163f2b;
  --river: #2a75a6;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg, var(--sky1) 0%, var(--sky2) 65%, #102226 100%);
  color: #fff;
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  padding:20px;
}

.scene{
  width: 920px;
  max-width:92vw;
  height:520px;
  position:relative;
  overflow:hidden;
  border-radius:12px;
  box-shadow:0 8px 30px rgba(0,0,0,0.45);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
}

/* HUD */
.hud{
  position:absolute;
  top:14px;
  right:16px;
  z-index:30;
}
#rain-toggle{
  background:rgba(255,255,255,0.12);
  border:1px solid rgba(255,255,255,0.15);
  color:#fff;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
}
#rain-toggle:active{transform:translateY(1px)}

/* sky and mist */
.sky{ position:absolute; inset:0; z-index:1; pointer-events:none; }
.sunset{
  position:absolute; left:50%; top:18%;
  width:240px; height:240px; transform:translateX(-50%);
  background: radial-gradient(circle at 40% 30%, rgba(255,200,120,0.45), rgba(255,170,80,0.08) 40%, transparent 60%);
  filter: blur(30px);
}
.mist{
  position:absolute; left:0; right:0; top:30%;
  height:70%;
  background:linear-gradient(180deg, rgba(250,250,250,0.06), rgba(12,20,24,0.08));
  mix-blend-mode: screen;
  opacity:0.9;
  z-index:2;
}

/* mountains */
.mountains{ position:absolute; bottom:90px; left:0; right:0; height:260px; z-index:4; }
.mountain{
  position:absolute;
  bottom:0;
  background:linear-gradient(180deg, var(--mount2), var(--mount));
  clip-path: polygon(50% 0, 100% 100%, 0 100%);
  opacity:0.98;
}
.m1{ left:-10%; width:60%; height:220px; transform:scaleX(1.05) translateX(-10px); z-index:4;}
.m2{ left:30%; width:55%; height:200px; opacity:0.9; z-index:3}
.m3{ left:60%; width:45%; height:170px; opacity:0.8; z-index:2}

/* trees (simple triangles) */
.trees{ position:absolute; bottom:60px; left:0; right:0; height:200px; display:flex; gap:18px; align-items:flex-end; justify-content:center; z-index:6; pointer-events:none }
.tree{
  width:28px; height:110px;
  position:relative;
}

/* river */
.river{
  position:absolute;
  bottom:0;
  left:-8%;
  width:116%;
  height:140px;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.15)), linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border-top-left-radius: 50% 40px;
  border-top-right-radius: 50% 40px;
  z-index:8;
  box-shadow: inset 0 10px 30px rgba(0,0,0,0.25);
  mix-blend-mode: screen;
  overflow:hidden;
}
.river::before{
  content:"";
  position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  opacity:0.6;
}

/* subtle caption */
.caption{
  position:absolute;
  left:16px; bottom:14px;
  font-size:13px; color:rgba(255,255,255,0.78);
  z-index:30;
  pointer-events:none;
}

/* ---------------------------
   Rain styles
   --------------------------- */
.rain{
  position:absolute;
  inset:0;
  z-index:20;
  pointer-events:none;
  overflow:hidden;
}

/* default hidden: drops only appear when .active present */
.rain span{ display:none; position:absolute; top:-10%; width:2px; height:14px; border-radius:1px; background:rgba(255,255,255,0.65); opacity:0.85; transform:translateY(-20vh); }

/* visible when active */
.rain.active span{ display:block; animation-name:fall; animation-timing-function:linear; animation-iteration-count:infinite; }

/* small splash near bottom (using ::after) */
.rain.active span::after{
  content:"";
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:-5px;
  width:6px; height:2px;
  border-radius:2px;
  opacity:0.15;
  background:rgba(255,255,255,0.9);
  transform-origin:center;
  animation: ripple 0.6s linear infinite;
}

/* keyframes */
@keyframes fall{
  0%{ transform: translateY(-30vh); opacity:0.85 }
  70%{ opacity:0.7 }
  100%{ transform: translateY(130vh); opacity:0.0 }
}
@keyframes ripple{
  0%{ transform: translateX(-50%) scaleX(0.05); opacity:0.15 }
  70%{ transform: translateX(-50%) scaleX(1); opacity:0.08 }
  100%{ opacity:0; transform: translateX(-50%) scaleX(1.3) }
}

/* small responsive tweak */
@media (max-width:520px){
  .scene{ height:420px }
  .trees { gap:10px }
}
